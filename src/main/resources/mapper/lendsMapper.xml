<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wyj.books.mapper.LendsMapper" >
    <resultMap id="BaseResultMap" type="com.wyj.books.entity.Lends" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="lendId" property="lendId" jdbcType="INTEGER" />
        <result column="bookId" property="bookId" jdbcType="INTEGER" />
        <result column="bookName" property="bookName" jdbcType="VARCHAR" />
        <result column="userId" property="userId" jdbcType="INTEGER" />
        <result column="contact" property="contact" jdbcType="VARCHAR" />
        <result column="outTime" property="outTime" jdbcType="TIMESTAMP" />
        <result column="deadline" property="deadline" jdbcType="TIMESTAMP" />
        <result column="returnStatus" property="returnStatus" jdbcType="INTEGER" />
        <result column="returnTime" property="returnTime" jdbcType="TIMESTAMP" />
        <result column="operatorId" property="operatorId" jdbcType="INTEGER" />
    </resultMap>
    <sql id="Base_Column_List" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        lendId,bookId, bookName, userId,contact,outTime,deadline,returnStatus,returnTime,operatorId
    </sql>

    <select id="getAllLend" resultType="com.wyj.books.entity.Lends">
        select * from lend
        <where>
            1 = 1
            <if test="searchStr !=null and searchStr !=''">
                and concat(lendId,bookId,bookName,userId,contact,outTime,deadline,returnTime) LIKE concat ('%', #{searchStr},'%')
            </if>
        </where>
    </select>

    <select id="getLendById" resultType="com.wyj.books.entity.Lends" parameterType="java.lang.Integer">
        select * from lend where lendId = #{lendId}
    </select>

    <select id="getUserLends" resultType="com.wyj.books.entity.Lends" parameterType="java.lang.Integer">
        select * from lend
        <where>
            1 = 1
            <if test="searchStr !=null and searchStr !=''">
                and concat(lendId,bookId,bookName,userId,contact,outTime,deadline,returnTime) LIKE concat ('%', #{searchStr},'%')
            </if>
            and userId = #{userId}
        </where>
    </select>
    
    <insert id="insertLend" parameterType="com.wyj.books.entity.Lends">
        insert into lend (bookId, bookName, userId,contact,outTime,deadline,returnStatus,returnTime,operatorId) values
        (#{bookId}, #{bookName}, #{userId},#{contact},#{outTime},#{deadline},#{returnStatus},#{returnTime},#{operatorId})
    </insert>

    <update id="updateLendById" parameterType="com.wyj.books.entity.Lends">
        update lend
        <set>
            <if test="bookId != null">
                bookId = #{bookId},
            </if>
            <if test="bookName != null">
                bookName = #{bookName},
            </if>
            <if test="userId != null">
                userId = #{userId},
            </if>
            <if test="contact != null">
                contact = #{contact},
            </if>
            <if test="outTime != null">
                outTime = #{outTime},
            </if>
            <if test="deadline != null">
                deadline = #{deadline},
            </if>
            <if test="returnStatus != null">
                returnStatus = #{returnStatus},
            </if>
            <if test="returnTime != null">
                returnTime = #{returnTime},
            </if>
            <if test="operatorId != null">
                operatorId = #{operatorId},
            </if>
        </set>
        where lendId = #{lendId}
    </update>

    <delete id="deleteLend" parameterType="java.lang.Integer">
        delete from lend
        where lendId = #{lendId}
    </delete>

</mapper>